# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢ä½ å¯¹ Linux Driver Analyzer çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ã€‚

## ğŸ“‹ è´¡çŒ®æ–¹å¼

### ğŸ› æŠ¥å‘Š Bug

å¦‚æœä½ å‘ç°äº† bugï¼Œè¯·åœ¨ GitHub Issues ä¸­æäº¤ï¼ŒåŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **é—®é¢˜æè¿°**ï¼šç®€æ´æ¸…æ™°åœ°æè¿°é—®é¢˜
2. **å¤ç°æ­¥éª¤**ï¼šå¦‚ä½•è§¦å‘è¿™ä¸ªé—®é¢˜
3. **é¢„æœŸè¡Œä¸º**ï¼šä½ æœŸæœ›å‘ç”Ÿä»€ä¹ˆ
4. **å®é™…è¡Œä¸º**ï¼šå®é™…å‘ç”Ÿäº†ä»€ä¹ˆ
5. **ç¯å¢ƒä¿¡æ¯**ï¼šPython ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿç­‰
6. **ç›¸å…³ä»£ç **ï¼šå¦‚æœå¯èƒ½ï¼Œæä¾›å¯¼è‡´é—®é¢˜çš„ä»£ç ç‰‡æ®µ

### âœ¨ æäº¤æ–°åŠŸèƒ½

1. å…ˆåœ¨ Issues ä¸­è®¨è®ºä½ çš„æƒ³æ³•
2. Fork ä»“åº“å¹¶åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. å®ç°åŠŸèƒ½å¹¶æ·»åŠ æµ‹è¯•
4. ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
5. æäº¤ Pull Request

### ğŸ“š å®Œå–„æ–‡æ¡£

- ä¿®æ­£æ‹¼å†™é”™è¯¯
- æ”¹è¿›è¯´æ˜æ¸…æ™°åº¦
- æ·»åŠ ç¤ºä¾‹ä»£ç 
- ç¿»è¯‘æ–‡æ¡£

### ğŸ”§ æ‰©å±•çŸ¥è¯†åº“

ä¸ºæ›´å¤š Linux å†…æ ¸æ¡†æ¶æ·»åŠ çŸ¥è¯†åº“æ¡ç›®ï¼š

```json
{
  "my_subsystem": {
    "description": "å­ç³»ç»Ÿæè¿°",
    "header": "linux/xxx.h",
    "callbacks": {
      "callback_name": {
        "trigger": "ä½•æ—¶è¢«è°ƒç”¨",
        "context": "æ‰§è¡Œä¸Šä¸‹æ–‡",
        "icon": "ğŸ“Œ"
      }
    }
  }
}
```

## ğŸ”§ å¼€å‘ç¯å¢ƒè®¾ç½®

### 1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/yourusername/linux-driver-analyzer.git
cd linux-driver-analyzer
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
# æˆ–
venv\Scripts\activate     # Windows
```

### 3. å®‰è£…å¼€å‘ä¾èµ–

```bash
pip install -e ".[dev]"
```

### 4. è¿è¡Œæµ‹è¯•

```bash
pytest tests/
```

### 5. ä»£ç æ ¼å¼åŒ–

```bash
black src/
isort src/
```

### 6. ç±»å‹æ£€æŸ¥

```bash
mypy src/
```

## ğŸ“ ä»£ç è§„èŒƒ

### Python é£æ ¼

- éµå¾ª PEP 8
- ä½¿ç”¨ Black æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨ç±»å‹æ³¨è§£
- ç¼–å†™æ–‡æ¡£å­—ç¬¦ä¸²

### ç¤ºä¾‹

```python
from typing import List, Optional

def analyze_function(
    source: str,
    options: Optional[dict] = None
) -> List[Function]:
    """
    åˆ†ææºä»£ç ä¸­çš„å‡½æ•°å®šä¹‰ã€‚
    
    Args:
        source: C æºä»£ç å­—ç¬¦ä¸²
        options: å¯é€‰çš„åˆ†æé€‰é¡¹
        
    Returns:
        å‡½æ•°å®šä¹‰åˆ—è¡¨
        
    Raises:
        ParseError: å¦‚æœæºä»£ç æ— æ³•è§£æ
    """
    # å®ç°...
```

### æäº¤ä¿¡æ¯è§„èŒƒ

ä½¿ç”¨çº¦å®šå¼æäº¤ï¼š

```
<ç±»å‹>(<èŒƒå›´>): <æè¿°>

[å¯é€‰æ­£æ–‡]

[å¯é€‰è„šæ³¨]
```

ç±»å‹ï¼š
- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `refactor`: é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·ç›¸å…³

ç¤ºä¾‹ï¼š
```
feat(backend): æ·»åŠ  tree-sitter åç«¯æ”¯æŒ

- é›†æˆ tree-sitter Python ç»‘å®š
- å®ç°å‡½æ•°å’Œç»“æ„ä½“æå–
- æ·»åŠ ç›¸å…³æµ‹è¯•

Closes #123
```

## ğŸ” Pull Request æµç¨‹

1. **åˆ›å»ºåˆ†æ”¯**
   ```bash
   git checkout -b feature/my-feature
   ```

2. **æäº¤æ›´æ”¹**
   ```bash
   git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"
   ```

3. **æ¨é€åˆ†æ”¯**
   ```bash
   git push origin feature/my-feature
   ```

4. **åˆ›å»º PR**
   - å¡«å†™ PR æ¨¡æ¿
   - å…³è”ç›¸å…³ Issue
   - ç­‰å¾… Review

### PR æ£€æŸ¥æ¸…å•

- [ ] ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ·»åŠ äº†å¿…è¦çš„æµ‹è¯•
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] æ²¡æœ‰å¼•å…¥æ–°çš„è­¦å‘Š

## ğŸ“Š é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ core/                 # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ basic_analyzer.py
â”‚   â”œâ”€â”€ advanced_analyzer.py
â”‚   â”œâ”€â”€ knowledge_base.json
â”‚   â””â”€â”€ models.py         # æ•°æ®æ¨¡å‹ (å¾…æ·»åŠ )
â”œâ”€â”€ backends/             # åˆ†æåç«¯
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base.py           # åŸºç±» (å¾…æ·»åŠ )
â”‚   â”œâ”€â”€ regex_backend.py
â”‚   â”œâ”€â”€ treesitter_backend.py (å¾…å®ç°)
â”‚   â””â”€â”€ clang_backend.py (å¾…å®ç°)
â””â”€â”€ visualizers/          # è¾“å‡ºç”Ÿæˆ
    â”œâ”€â”€ __init__.py
    â””â”€â”€ json_exporter.py
```

## ğŸ¯ ä¼˜å…ˆä»»åŠ¡

å½“å‰æœ€éœ€è¦å¸®åŠ©çš„é¢†åŸŸï¼š

1. **tree-sitter é›†æˆ** - å®ç°æ›´ç²¾ç¡®çš„è¯­æ³•è§£æ
2. **æµ‹è¯•ç”¨ä¾‹** - å¢åŠ æµ‹è¯•è¦†ç›–ç‡
3. **æ–‡æ¡£å®Œå–„** - API æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹
4. **çŸ¥è¯†åº“æ‰©å±•** - æ·»åŠ æ›´å¤šå†…æ ¸æ¡†æ¶

## ğŸ’¬ è·å–å¸®åŠ©

- GitHub Discussions: æé—®å’Œè®¨è®º
- Issues: Bug æŠ¥å‘Šå’ŒåŠŸèƒ½è¯·æ±‚

æ„Ÿè°¢ä½ çš„è´¡çŒ®ï¼ ğŸ™

